$(function(){function n(n){const t="/api/user/"+app.getPathPart(window.location.href,1);app.get(t,function(t){n.$data.el.userName=t.data.userName;n.$data.el.email=t.data.email;n.$data.el.phoneNumber=t.data.phoneNumber;n.$data.el.lastName=t.data.lastName;n.$data.el.firstName=t.data.firstName;n.$data.el.officePhone=t.data.officePhone;n.$data.el.sex=t.data.sex;n.$data.el.group=t.data.group;n.$data.el.title=t.data.title;n.$data.el.level=t.data.level})}new Vue({el:"#view",data:{activeMenu:"用户管理",menus:menus,module:"编辑用户",moduleDescription:"",breadcrumb:[{name:"用户管理",href:"/user"},{name:"编辑",href:"#"}],el:{userName:"",email:"",phoneNumber:"",lastName:"",firstName:"",officePhone:"",sex:"Male",title:"",group:"",level:""},errors:[]},watch:{sex:function(n){$("#sex").val(n).trigger("change")},title:function(n){$("#title").val(n).trigger("change")},group:function(n){$("#group").val(n).trigger("change")},level:function(n){$("#level").val(n).trigger("change")}},created:function(){n(this)},mounted:function(){let n=this;$(".select2").select2({minimumResultsForSearch:Infinity});$("#sex").on("change",function(){n.sex=$("#sex").val()});$("#title").on("change",function(){n.title=$("#title").val()});$("#group").on("change",function(){n.group=$("#group").val()});$("#level").on("change",function(){n.level=$("#level").val()})},methods:{checkUser:function(){return this.errors=[],app.requireCheck(this.el.userName)?app.rangeCheck(this.el.userName.length,4,30)||this.errors.push("用户名长度范围为 4-30"):this.errors.push("用户名不能为空"),app.emailCheck(this.el.email)||this.errors.push("邮箱地址不正确"),app.mobileCheck(this.el.phoneNumber)||this.errors.push("手机号码不正确"),app.phoneCheck(this.el.officePhone)||this.errors.push("公司电话不正确"),app.requireCheck(this.el.firstName)?app.rangeCheck(this.el.firstName.length,1,50)||this.errors.push("姓 长度范围为 1-50"):this.errors.push("姓 不能为空"),app.requireCheck(this.el.lastName)?app.rangeCheck(this.el.lastName.length,1,50)||this.errors.push("名 长度范围为 1-50"):this.errors.push("名 不能为空"),!this.errors.length},update:function(){this.checkUser()&&app.put("/api/user/"+app.getPathPart(window.location.href,1),this.$data.el,function(){swal({title:"更新成功",type:"success",showCancelButton:!1})},function(n){swal({title:"更新失败",type:"error",text:n.msg,showCancelButton:!1})})}}})});