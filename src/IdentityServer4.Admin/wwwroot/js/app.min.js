const app={};app.getUrlParam=function(n){let t=location.search.match(new RegExp("[?&]"+n+"=([^&]+)","i"));return t===null||t.length<1?"":t[1]};app.getPathPart=function(n,t){n=n.replace(/^http:\/\/[^/]+/,"");let i=n.split("/"),r="";return t?(t=t+1,t<i.length&&(r=i[t])):r=i[i.length-1],decodeURI(r)};app.successHandler=function(n,t,i){n&&n.code===200?t&&t(n):i?i(n):swal&&(n.msg?swal("错误",n.msg,"error"):swal("错误","未知错误","error"))};app.errorHandler=function(n,t){t?t(n):swal&&(n.statusText?swal("错误",n.statusText,"error"):swal("错误","未知错误","error"))};app.post=function(n,t,i,r){$.ajax({url:n,data:JSON.stringify(t),headers:{RequestVerificationToken:$('input[name$="__RequestVerificationToken"]').val()},method:"POST",dataType:"json",contentType:"application/json",success:function(n){app.successHandler(n,i,r)},error:function(n){app.errorHandler(n,r)}})};app.get=function(n,t,i){$.ajax({url:n,method:"GET",success:function(n){app.successHandler(n,t,i)},error:function(n){app.errorHandler(n,i)}})};app.delete=function(n,t,i){$.ajax({url:n,method:"DELETE",success:function(n){app.successHandler(n,t,i)},error:function(n){app.errorHandler(n,i)}})};app.put=function(n,t,i,r){$.ajax({url:n,data:JSON.stringify(t),method:"PUT",dataType:"json",contentType:"application/json",success:function(n){app.successHandler(n,i,r)},error:function(n){app.errorHandler(n,r)}})};app.head=function(n,t,i){$.ajax({url:n,method:"HEAD",success:function(){t&&t()},error:function(){i&&i()}})};app.ui={};app.pagers={};app.ui.initPagination=function(n,t,i){let r=t.total||1,u=t.size||10,f=t.page||1,e=parseInt(r/u,10)+(r%u>0?1:0)||1,o={startPage:f,totalPages:e,visiblePages:10,first:"First",prev:"Previous",next:"Next",last:"Last",onPageClick:function(t,r){if(!app.pagers[n]){app.pagers[n]=!0;return}i(r)}};app.pagers.hasOwnProperty(n)&&$(n).twbsPagination("destroy");app.pagers[n]=!1;$(n).twbsPagination(o)};app.formatDate=function(n,t="YY-MM-DD hh:mm:ss"){let i=new Date(n),h=i.getFullYear(),u=i.getMonth()+1,f=i.getDate(),e=i.getHours(),o=i.getMinutes(),s=i.getSeconds(),r=Array.apply(null,Array(10)).map(function(n,t){return"0"+t});return t.replace(/YY/g,h).replace(/MM/g,r[u]||u).replace(/DD/g,r[f]||f).replace(/hh/g,r[e]||e).replace(/mm/g,r[o]||o).replace(/ss/g,r[s]||s)};$(function(){$("#btnLogout").click(function(){$("#logoutForm").submit()});let n=new Oidc.UserManager;n.getUser().then(function(n){n&&(app.user=n)})});