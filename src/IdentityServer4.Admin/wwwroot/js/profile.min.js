$(function(){function n(n){const t="/api/user/"+app.getPathPart(window.location.href,1)+"/profile";app.get(t,function(t){n.$data.userName=t.data.userName;n.$data.email=t.data.email;n.$data.phoneNumber=t.data.phoneNumber;n.$data.lastName=t.data.lastName;n.$data.firstName=t.data.firstName;n.$data.officePhone=t.data.officePhone;n.$data.sex=t.data.sex;n.$data.group=t.data.group;n.$data.title=t.data.title;n.$data.level=t.data.level;n.$data.roles=t.data.roles})}new Vue({el:"#view",data:{activeMenu:"个人信息",menus:menus,module:"个人信息",moduleDescription:"",breadcrumb:[{name:"个人信息",href:"#"}],userName:"",email:"",phoneNumber:"",oldPassword:"",newPassword:"",lastName:"",firstName:"",officePhone:"",roles:"",sex:"Male",title:"",group:"",level:""},created:function(){n(this)},watch:{sex:function(n){$("#sex").val(n).trigger("change")},title:function(n){$("#title").val(n).trigger("change")},group:function(n){$("#group").val(n).trigger("change")},level:function(n){$("#level").val(n).trigger("change")}},mounted:function(){let n=this;$(".select2").select2({minimumResultsForSearch:Infinity});$("#sex").on("change",function(){n.sex=$("#sex").val()});$("#title").on("change",function(){n.title=$("#title").val()});$("#group").on("change",function(){n.group=$("#group").val()});$("#level").on("change",function(){n.level=$("#level").val()})},methods:{update:function(){app.put("/api/user/"+app.getPathPart(window.location.href,1)+"/profile",{userName:this.$data.userName,email:this.$data.email,phoneNumber:this.$data.phoneNumber,lastName:this.$data.lastName,firstName:this.$data.firstName,officePhone:this.$data.officePhone,sex:this.$data.sex,title:this.$data.title,group:this.$data.group,level:this.$data.level},function(){swal({title:"更新成功",type:"success",showCancelButton:!1})},function(n){swal({title:"更新失败",type:"error",text:n.msg,showCancelButton:!1})})},changePassword:function(){app.put("/api/user/"+app.getPathPart(window.location.href,1)+"/password",{oldPassword:this.$data.oldPassword,newPassword:this.$data.newPassword},function(){swal({title:"更新成功",type:"success",showCancelButton:!1})},function(n){swal({title:"更新失败",type:"error",text:n.msg,showCancelButton:!1})})}}})});