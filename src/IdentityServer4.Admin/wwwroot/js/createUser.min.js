$(function(){new Vue({el:"#view",data:{activeMenu:"用户管理",menus:menus,module:"创建用户",moduleDescription:"",breadcrumb:[{name:"用户管理",href:"/user"},{name:"创建",href:"#"}],el:{userName:"",email:"",password:"",phoneNumber:"",officePhone:"",firstName:"",lastName:"",sex:"Male",title:"",group:"",level:""},errors:[]},watch:{sex:function(n){$("#sex").val(n).trigger("change")},title:function(n){$("#title").val(n).trigger("change")},group:function(n){$("#group").val(n).trigger("change")},level:function(n){$("#level").val(n).trigger("change")}},mounted:function(){let n=this;$(".select2").select2({minimumResultsForSearch:Infinity});$("#sex").on("change",function(){n.el.sex=$("#sex").val()});$("#title").on("change",function(){n.el.title=$("#title").val()});$("#group").on("change",function(){n.el.group=$("#group").val()});$("#level").on("change",function(){n.el.level=$("#level").val()})},methods:{checkUser:function(){return this.errors=[],app.requireCheck(this.el.userName)?app.rangeCheck(this.el.userName.length,4,30)||this.errors.push("用户名长度范围为 4-30"):this.errors.push("用户名不能为空"),app.emailCheck(this.el.email)||this.errors.push("邮箱地址不正确"),app.rangeCheck(this.el.password.length,6,24)||this.errors.push("密码长度范围为 6-24"),app.mobileCheck(this.el.phoneNumber)||this.errors.push("手机号码不正确"),app.phoneCheck(this.el.officePhone)||this.errors.push("公司电话不正确"),app.requireCheck(this.el.firstName)?app.rangeCheck(this.el.firstName.length,1,50)||this.errors.push("姓 长度范围为 1-50"):this.errors.push("姓 不能为空"),app.requireCheck(this.el.lastName)?app.rangeCheck(this.el.lastName.length,1,50)||this.errors.push("名 长度范围为 1-50"):this.errors.push("名 不能为空"),!this.errors.length},create:function(){let n=this;n.checkUser()&&app.post("/api/user",this.$data.el,function(){window.location.href="/user"},function(t){n.errors=[];n.errors.push(t.msg)})}}})});