@model IdentityServer4.Admin.ViewModels.Consent.ConsentViewModel
<!-- iCheck -->
<link rel="stylesheet" href="~/lib/admin-lte/plugins/iCheck/square/blue.css" asp-append-version="true">

<div class="col-xs-12">
    <form asp-action="Index" class="consent-form">
        <div class="box">
            <!-- /.box-header -->
            <div class="box-body">
                <div class="row">
                    <div class="col-md-8">
                        <div class="form-group">
                            <label>@Model.ClientName</label>
                            将获得以下授权
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-8">
                        @await Html.PartialAsync("_ValidationSummary")
                        <input type="hidden" asp-for="ReturnUrl"/>
                        @if (Model.IdentityScopes.Any())
                        {
                            <div class="form-group panel panel-default">
                                <div class="panel-heading">
                                    <span class="glyphicon glyphicon-user"></span>
                                    个人信息
                                </div>
                                <ul class="list-group">
                                    @foreach (var scope in Model.IdentityScopes)
                                    {
                                        @await Html.PartialAsync("_ScopeListItem", scope)
                                    }
                                </ul>
                            </div>
                        }
                        @if (Model.ResourceScopes.Any())
                        {
                            <div class="form-group panel panel-default">
                                <div class="panel-heading">
                                    <span class="glyphicon glyphicon-tasks"></span>
                                    应用权限
                                </div>
                                <ul class="list-group">
                                    @foreach (var scope in Model.ResourceScopes)
                                    {
                                        @await Html.PartialAsync("_ScopeListItem", scope)
                                    }
                                </ul>
                            </div>
                        }
                        @if (Model.AllowRememberConsent)
                        {
                            <div class="consent-remember ">
                                <label>
                                    <input class="icheck" asp-for="RememberConsent"/>
                                    <strong>记住我的选择</strong>
                                </label>
                            </div>
                        }

                    </div>
                </div>
            </div>
            <div class="box-footer clearfix">
                <button name="button" value="yes" class="btn btn-primary" autofocus>授权</button>
                <button name="button" value="no" class="btn btn-default">拒绝</button>
                @if (Model.ClientUrl != null)
                {
                    <a class="pull-right btn btn-default" target="_blank" href="@Model.ClientUrl">
                        <span class="glyphicon glyphicon-info-sign"></span>
                        <strong>@Model.ClientName</strong>
                    </a>
                }
            </div>
            <!-- /.box-body -->
        </div>
    </form>
    <!-- /.box -->
</div>

@section scripts{
    <script src="~/lib/admin-lte/plugins/iCheck/icheck.min.js" asp-append-version="true"></script>
    <environment names="Development">
        <script src="~/js/consent.js" asp-append-version="true"></script>
    </environment>
    <environment names="Staging,Production">
        <script src="~/js/consent.min.js" asp-append-version="true"></script>
    </environment>
}